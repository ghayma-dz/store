<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>متجر غيمة 'ﮮ</title>
<link rel="icon" href="ghayma_logo_sm.png" type="image/png">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;600&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>

<style>
body{
    margin:0;
    font-family:'Montserrat',sans-serif;
    background:linear-gradient(135deg,#ff6e40,#9b59b6,#d2527f,#f1c40f);
    background-size:800% 800%;
    animation:rgbFlow 25s ease infinite;
    overflow:hidden;
    display:flex;
    justify-content:center;
    align-items:center;
    height:100vh;
    color:#fff;
    position:relative;
}
@keyframes rgbFlow{
    0%{background-position:0% 50%;}
    50%{background-position:100% 50%;}
    100%{background-position:0% 50%;}
}
.container{
    background:rgba(0,0,0,0.35);
    backdrop-filter:blur(12px);
    padding:30px;
    border-radius:25px;
    width:350px;
    text-align:center;
}
h2{
    font-size:28px;
    font-weight:600;
}
.icon img{
    width:160px;
    filter:drop-shadow(0 0 15px rgba(0,0,0,0.7));
}
input{
    width:90%;
    padding:15px;
    border-radius:12px;
    border:none;
    text-align:center;
    font-size:16px;
    background:rgba(255,255,255,0.1);
    color:#fff;
}
input:focus{
    outline:none;
    background:rgba(255,255,255,0.2);
}
button{
    width:100%;
    padding:15px;
    margin-top:20px;
    background:#ff9f1c;
    border:none;
    border-radius:12px;
    cursor:pointer;
    font-size:18px;
    font-weight:600;
}

/* --- Restored frosted result background --- */
.result-wrapper{
    background:rgba(255,255,255,0.18);
    border-radius:18px;
    padding:15px 20px;
    margin-top:20px;
    backdrop-filter:blur(10px);
    -webkit-backdrop-filter:blur(10px);
    border:1px solid rgba(255,255,255,0.32);
}

.result-box{
    font-size:22px;
    padding:10px;
}
.result-letters{
    margin-top:5px;
    font-size:19px;
}

/* --- Clouds --- */
.cloud{
    position:absolute;
    opacity:0.70;
    filter:brightness(2) drop-shadow(0 0 10px rgba(255,255,255,0.4));
    will-change:transform;
    pointer-events:none;
}
</style>
</head>

<body>

<div id="cloudLayer"></div>

<div class="container">
    <div class="icon">
        <img id="logo" src="ghayma_logo.png">
    </div>

    <h2>متجر غيمة 'ﮮ</h2>

    <input id="usd" type="text" placeholder="$ أدخل كمية ال" oninput="handleInput()">

    <!-- Restored rounded background -->
    <div class="result-wrapper">
        <div id="result" class="result-box">0 د.ج</div>
        <div id="resultLetters" class="result-letters">صفر</div>
    </div>

    <button onclick="copyResult()">انسخ</button>
</div>

<script>
/* -----------------------------------------
   LIGHT LOGO ANIMATION
----------------------------------------- */
const logo = document.getElementById("logo");
const anim = ['logoPulse 2s infinite','logoBounce 1.6s infinite','logoSpin 3.5s linear infinite'];
logo.style.animation = anim[Math.floor(Math.random()*anim.length)];

/* -----------------------------------------
   ARABIC NUMBER-TO-WORDS
----------------------------------------- */
function numberToWords(num){
    if(num===0) return 'صفر';
    const units=['','واحد','اثنان','ثلاثة','أربعة','خمسة','ستة','سبعة','ثمانية','تسعة'];
    const teens=['عشرة','أحد عشر','اثنا عشر','ثلاثة عشر','أربعة عشر','خمسة عشر','ستة عشر','سبعة عشر','ثمانية عشر','تسعة عشر'];
    const tens=['','', 'عشرون','ثلاثون','أربعون','خمسون','ستون','سبعون','ثمانون','تسعون'];
    const hundreds=['','مئة','مئتان','ثلاثمئة','أربعمئة','خمسمئة','ستمئة','سبعمئة','ثمانمئة','تسعمئة'];

    function join(p){return p.filter(x=>x).join(' و ');}

    function helper(n){
        let p=[];

        if(n>=1e6){
            const m=Math.floor(n/1e6);
            if(m===1) p.push('مليون');
            else if(m===2) p.push('مليونان');
            else p.push(helper(m)+' ملايين');
            n%=1e6;
        }

        if(n>=1000){
            const t=Math.floor(n/1000);
            if(t===1) p.push('ألف');
            else if(t===2) p.push('ألفان');
            else p.push(helper(t)+' ألفا');
            n%=1000;
        }

        if(n>=100){
            const h=Math.floor(n/100);
            p.push(hundreds[h]);
            n%=100;
        }

        if(n>=20){
            const ten=Math.floor(n/10);
            const u=n%10;
            if(u)p.push(units[u]+' و'+tens[ten]);
            else p.push(tens[ten]);
        } else if(n>=10) p.push(teens[n-10]);
        else if(n>0) p.push(units[n]);

        return join(p);
    }

    return helper(num);
}

/* -----------------------------------------
   INSTANT CALCULATOR (NO ANIMATION)
----------------------------------------- */
let confettiTimeout;
function handleInput(){
    let v=usd.value.replace(/[^0-9.]/g,'');
    usd.value=v;

    const num=parseFloat(v);
    if(isNaN(num)||num===0){
        result.textContent="0 د.ج";
        resultLetters.textContent="صفر";
        return;
    }

    const total=num*310;

    result.textContent=total.toLocaleString()+" د.ج";
    resultLetters.textContent=numberToWords(total*100);

    clearTimeout(confettiTimeout);
    confettiTimeout=setTimeout(()=>{
        confetti({particleCount:2,spread:35,origin:{y:0.6}});
    },200);
}

/* -----------------------------------------
   COPY BUTTON
----------------------------------------- */
function copyResult(){
    navigator.clipboard.writeText(result.textContent);
    alert("Copied!");
}

/* -----------------------------------------
   CLOUD ENGINE
----------------------------------------- */
const cloudLayer=document.getElementById("cloudLayer");
const cloudImages=["cloud1.png","cloud2.png","cloud3.png"];

function spawnCloud(){
    const cloud=document.createElement("img");
    cloud.src=cloudImages[Math.floor(Math.random()*cloudImages.length)];
    cloud.className="cloud";

    const size=250+Math.random()*120;  // larger clouds
    cloud.style.width=size+"px";
    cloud.style.top=(20+Math.random()*50)+"%";
    cloud.style.left="-"+size+"px";

    const duration=28+Math.random()*12;
    cloud.style.transitionDuration=duration+"s";

    cloudLayer.appendChild(cloud);

    requestAnimationFrame(()=>{
        cloud.style.transform=`translateX(${window.innerWidth + size*2}px)`;
    });

    setTimeout(()=>cloud.remove(),duration*1000);
}

for(let i=0;i<3;i++) spawnCloud();
setInterval(spawnCloud,4500);
</script>

</body>
</html>
